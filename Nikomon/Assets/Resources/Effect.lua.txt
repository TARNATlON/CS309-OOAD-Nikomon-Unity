effectTemplate = {
    ID=-1,
    InnerName = 'template',
    Round = 5,
    EffectLastType = CS.PokemonCore.Combat.Interface.EffectLastType.ALWAYS,
    EffectChance = 100,
    isUsed=false,
    
    BeFaint = function(combatPoke)    end,
    BeSwitched = function(combatPoke) end,
    OnEffectBegin = function(combatPoke) end,
    OnChoosing = function(combatPoke) return instruction  end,
    OnMoving = function(combatMove,combatPoke) return combatMove end,
    OnHit = function(combatPoke,damage) return damage end,
    BeHurt = function(combatPoke,damage) return damage end,
    OnDamaged = function(sponsor,target) end,
    OnMoved = function(sponsor)  end,
    OnSwitchPokemon = function(combatPoke) return True end,
    OnEffectEnd = function(combatPoke) end,
}
EffectLastType = CS.PokemonCore.Combat.Interface.EffectLastType
Combat = CS.PokemonCore.Combat

--这个effect是所有宝可梦都拥有的一个effect，效果是如果发出来的技能和本身属性相同，则威力*1.5，注意取整
effect0={
    ID=0,
    InnerName='SameTypePowerUp',
    Round=-1,
    EffectLastType= EffectLastType.ALWAYS,
    EffectChance=100,

    OnMoving = function(combatMove)
        --print('Use effect 0')
        --if combatMove.type.ID == 
        if combatMove.types.ID == combatMove.Sponsor.Type1 or combatMove.types.ID == combatMove.Sponsor.Type2  or combatMove.types.ID == combatMove.Sponsor.Type3  then
            combatMove.power=math.floor(combatMove.power*1.5)
            --print('Pokemon:'..combatMove.Sponsor.pokemon.Name..' powers up!')
        end
        return combatMove
    end
}


effect1={
    ID=1,
    InnerName='Chaos',
    Round=3,
    EffectLastType=Combat.Interface.EffectLastType.ROUND,
    EffectChance=50,
    
    OnMoving=function(combatMove) 
        rand = CS.PokemonCore.Game.Instance.Random.Next(101)
        if rand>EffectChance then
            combatMove.Target=combatMove.Sponsor.combatID
        end
    end
}
effect2={ --over!
    ID=2,
    InnerName='Sleep',
    Round=3,
    EffectLastType=Combat.Interface.EffectLastType.ROUND,
    EffectChance=100,
	EffectType=SkipOneTurn, 	--is that enough ???
	EffectActTime=Moving,
    OnChoosing = function(combatPoke) 
        instruction = new Combat.instruction(combatPoke,CS.PokemonCore.Combat.Command.Skip,-1,-1)
        Round=Round-1
        return instruction
    end
    
}
effect3={ --over!
    ID=3,
    InnerName='Poison',
    Round=3,
    EffectLastType=Combat.Interface.EffectLastType.ROUND,
    EffectChance=100,
    
    OnMoved=function(sponsor)
        print("poision on moved test")
        effect3.Round=effect3.Round-1
        print(sponsor.TotalHP,sponsor.HP)
        sponsor.HP = sponsor.HP - math.modf( sponsor.TotalHP / 8 )
        print(sponsor.TotalHP,sponsor.HP)
        print(sponsor)
        --damage to sponsor with 1/8 of sponsor's Hp
    end
}
effect4={ --over!
    ID = 4,
    InnerName = 'Freeze',
    Round = 3,
    EffectLastType=CS.PokemonCore.Combat.Interface.EffectLastType.ROUND,
    EffectChance=100,

    OnMoving=function(combatMove)
        effect4.Round = effect4.Round-1
        for t in combatMove.move._baseData.MoveTag do
            if(t=="BrokeFreeze") then
                return
            end
        end
        combatMove.target = nil
    end
    
}

effect5={ --over!
    ID = 5,
    InnerName = 'Paralysis',
    Round = 1,
    --25%无法使用技能
    OnMoving=function(combatMove)
        rand = CS.PokemonCore.Game.Random:Next(101)
        print("Paralysis: OnMoving",rand)

        if rand<100 then
            print("Paralysis Succeed!")
            combatMove.Targets = nil
        end
        effect5.Round=effect5.Round-1
        return combatMove
    end,
    
    OnEffectEnd = function(combatPoke)  
        combatPoke.SPE = combatPoke.SPE*2
    end,
    
    OnEffectBegin = function(combatPoke) 
        combatPoke.SPE = combatPoke.SPE*0.5
    end
}

effect6={ --over!
    ID = 6,
    InnerName = 'Burn',
    Round = 1,
    OnMoving=function(combatMove)
        if combatMove.Category == PokemonCore.Attack.Data.Category.Physical then
            -- TODO: 变为改变damage的rate
            combatMove.power = combatMove.power/2
        end
    end
    ,
    OnMoved = function(sponsor)
        sponsor.TotalHP = sponsor.TotalHP - sponsor.HP / 16
        effect6.Round=effect6.Round-1
    end

}

effect11={
    ID=11,
    InnerName='raiseATK',
    Round=3,
    EffectLastType=CS.PokemonCore.Combat.Interface.EffectLastType.UNTIL_SWITCH_POKEMON,
    EffectChance=100,
    
    OnMoving=function(combatMove) 
		combatMove.Sponsor.ATKStateChange.set(ATKStateChange.get() + 1)
        Round=Round-1
    end
}
effect12={
    ID=12,
    InnerName='raiseDEF',
    Round=3,
    EffectLastType=CS.PokemonCore.Combat.Interface.EffectLastType.UNTIL_SWITCH_POKEMON,
    EffectChance=100,
    
    OnMoving=function(combatMove) 
		combatMove.Sponsor.DEFStateChange.set(DEFStateChange.get() + 1)
    end
}
effect13={
    ID=13,
    InnerName='raiseSPA',
    Round=3,
    EffectLastType=CS.PokemonCore.Combat.Interface.EffectLastType.UNTIL_SWITCH_POKEMON,
    EffectChance=100,
    
    OnMoving=function(combatMove) 
		combatMove.Sponsor.SPAStateChange.set(SPAStateChange.get() + 1)
    end
}
effect14={
    ID=14,
    InnerName='raiseEvation',
    Round=3,
    EffectLastType=CS.PokemonCore.Combat.Interface.EffectLastType.UNTIL_SWITCH_POKEMON,
    EffectChance=100,
    
    OnMoving=function(combatMove) 
		combatMove.Sponsor.EvasionStateChange.set(EvasionStateChange.get() + 1)
    end
}
effect15={
    ID=16,
    InnerName='raiseAccuracy',
    Round=3,
    EffectLastType=CS.PokemonCore.Combat.Interface.EffectLastType.UNTIL_SWITCH_POKEMON,
    EffectChance=100,
    
    OnMoving=function(combatMove) 
		combatMove.Sponsor.AccuracyStateChange.set(AccuracyStateChange.get() + 12)
    end
}



effect17={
    ID=17,
    InnerName='lowerATK',
    Round=3,
    EffectLastType=CS.PokemonCore.Combat.Interface.EffectLastType.UNTIL_SWITCH_POKEMON,
    EffectChance=100,
    
    OnMoving=function(combatMove) 
		combatMove.Sponsor.ATKStateChange.set(ATKStateChange.get() - 1)
    end
}
effect18={
    ID=18,
    InnerName='lowerDEF',
    Round=3,
    EffectLastType=CS.PokemonCore.Combat.Interface.EffectLastType.UNTIL_SWITCH_POKEMON,
    EffectChance=100,
    
    OnMoving=function(combatMove) 
		combatMove.Sponsor.DEFStateChange.set(DEFStateChange.get() - 1)
    end
}
effect19={
    ID=19,
    InnerName='lowerSPE',
    Round=3,
    EffectLastType=CS.PokemonCore.Combat.Interface.EffectLastType.UNTIL_SWITCH_POKEMON,
    EffectChance=100,
    
    OnMoving=function(combatMove) 
		combatMove.Sponsor.SPEStateChange.set(SPEStateChange.get() - 1)
    end
}
effect20={
    ID=20,
    InnerName='lowerAccuracy',
    Round=3,
    EffectLastType=CS.PokemonCore.Combat.Interface.EffectLastType.UNTIL_SWITCH_POKEMON,
    EffectChance=100,
    
    OnMoving=function(combatMove) 
		combatMove.Sponsor.AccuracyStateChange.set(AccuracyStateChange.get() - 1)
    end
}
effect21={
    ID=21,
    InnerName='lowerEvation',
    Round=3,
    EffectLastType=CS.PokemonCore.Combat.Interface.EffectLastType.UNTIL_SWITCH_POKEMON,
    EffectChance=100,
    
    OnMoving=function(combatMove) 
		combatMove.Sponsor.EvasionStateChange.set(EvasionStateChange.get() - 1)
    end
}




